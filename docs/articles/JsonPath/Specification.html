<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>JsonCons JsonPath Specification </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="JsonCons JsonPath Specification ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="jsoncons-jsonpath-specification">JsonCons JsonPath Specification</h1>

<h2 id="grammar">Grammar</h2>
<pre><code class="lang-text">jsonpath = &quot;$&quot; [relative-location]
jsonpath = &quot;@&quot; [relative-location]

relative-location = &quot;.&quot; relative-path
relative-location =/ &quot;..&quot; relative-path
relative-location =/ &quot;..&quot; bracket-expression [relative-location]
relative-location =/ &quot;^&quot; [relative-location]

relative-path = identifier [relative-location]
relative-path =/ wildcard [relative-location]

bracket-expression = &quot;[&quot; bracketed-element *(&quot;,&quot; bracketed-element) &quot;]&quot;

bracketed-element = index / slice-expression / single-quoted-string / double-quoted-string
bracketed-element =/ wildcard / filter-expression / jsonpath

filter-expression = &quot;?&quot; expression

slice-expression  = [integer] &quot;:&quot; [integer] [ &quot;:&quot; [integer] ]

integer            = [&quot;-&quot;]1*digit

identifier = unquoted-string / single-quoted-string / double-quoted-string

unquoted-string   =     %x30-39  /  ; 0-9
                        %x41-5A  /  ; A-Z
                        %x5F     /  ; _
                        %x61-7A  /  ; a-z
                        %x80-10FFFF ; U+0080 ...    

double-quoted-string     = double-quote 
                           1*(unescaped-char / single-quote / escaped-char / escaped-double-quote) 
                           double-quote

unescaped-char    = %x20-21 / %x23-2b / %x2d-5B / %x5D-10FFFF
Escape            = %x5C   ; Back slash: \
escaped-char      = Escape (
                        %x5C /          ; \    reverse solidus U+005C
                        %x2F /          ; /    solidus         U+002F
                        %x62 /          ; b    backspace       U+0008
                        %x66 /          ; f    form feed       U+000C
                        %x6E /          ; n    line feed       U+000A
                        %x72 /          ; r    carriage return U+000D
                        %x74 /          ; t    tab             U+0009
                        %x75 4HEXDIG )  ; uXXXX                U+XXXX

single-quote             = %x2c   ; Single quote: &quot;'&quot;
double-quote             = %x22   ; Double quote: '&quot;'
escaped-double-quote      = Escape %x22          ; &quot;    double quote  U+0022
escaped-single-quote      = Escape %x2c          ; '    single quote  U+002c

single-quoted-string     = single-quote 
                           1*(unescaped-char / double-quote / escaped-char / escaped-single-quote) 
                           single-quote

expression = single-quoted-string 
expression =/ json-literal
expression =/ jsonpath 
expression =/ unary-expression / binary-expression / regex-expression / paren-expression 
paren-expression  = &quot;(&quot; expression &quot;)&quot;
unary-expression=unary-operator expression
binary-expression = expression binary-operator expression
regex-expression = expression regex-operator &quot;/&quot; regex &quot;/&quot; [i]
unary-operator = &quot;!&quot; / &quot;-&quot;
binary-operator  = &quot;*&quot; / &quot;/&quot; / &quot;%&quot; / &quot;+&quot; / &quot;-&quot; / &quot;&amp;&amp;&quot; / &quot;||&quot; / &lt;&quot; / &quot;&lt;=&quot; / &quot;==&quot; / &quot;&gt;=&quot; / &quot;&gt;&quot; / &quot;!=&quot; 
regex-operator = &quot;=~&quot;

; &quot;json-literal&quot; is any valid JSON value.  
;
; &quot;regex&quot; represents regular expression characters

function-expression = unquoted-string  (
                        no-args  /
                        one-or-more-args )
no-args             = &quot;(&quot; &quot;)&quot;
one-or-more-args    = &quot;(&quot; ( function-arg *( &quot;,&quot; function-arg ) ) &quot;)&quot;
function-arg        = expression

</code></pre>
<h2 id="selectors">Selectors</h2>
<p>After tokenization, a JSONPath string is transformed into a null terminated
linked list of selectors. There are ten different kinds of selectors:</p>
<p><a href="#Selector1">Root selector ($)</a><br>
<a href="#Selector2">Current node selector (@)</a><br>
<a href="#Selector3">Parent node selector (^)</a><br>
<a href="#Selector4">Identifier selector</a><br>
<a href="#Selector5">Index selector</a><br>
<a href="#Selector6">Slice selector</a><br>
<a href="#Selector7">Recursive descent selector (..)</a><br>
<a href="#Selector8">Wildcard selector (*)</a><br>
<a href="#Selector9">Union selector</a><br>
<a href="#Selector10">Filter selector</a></p>
<p>When executing a JSONPath query against a JSON value, the list of selectors
is applied to the value to produce a result set of selected items. This works as follows:</p>
<ul>
<li>Provide the value to the selector at the head of the list</li>
<li>This selector will select zero or more items from the provided value,
and, for each item, provide the item to its tail.</li>
<li>This proceeds recursively until the tail is null. The last selector
in the list will add its provided value to the result set.</li>
</ul>
<p>Note that only the last selector in the list adds to the result set.</p>
<p>Consider the JSON document</p>
<pre><code>{&quot;foo&quot;:[
  {&quot;a&quot;:&quot;bar&quot;},
  {&quot;b&quot;:&quot;baz&quot;},
  {&quot;b&quot;:&quot;qux&quot;}
]}
</code></pre>
<p>and JSONPath</p>
<pre><code>$.foo[*].b 
</code></pre>
<p>After tokenization, the JSONPath becomes</p>
<p><img src="images/SelectorList.png" alt="SelectorList"></p>
<p>Evaluation proceeds as follows:</p>
<p><img src="images/ExecuteSelectorList.png" alt="ExecuteSelectorList"></p>
<p>The final result is</p>
<pre><code>[&quot;baz&quot;,&quot;qux&quot;]
</code></pre>
<div id="Selector1"></div> 
<h3 id="root-and-current-node">Root and current node</h3>
<p>The symbol '$' represents the root JSON value, the JSON document to be evaluated.
The symbol '@' represents the &quot;current node&quot;. At the start of an expression,
the current node is the document to be evaluated, and as the expression
is evaluated, it changes to reflect the node currently being processed.</p>
<div id="Selector3"></div> 
<h3 id="parent-selector">Parent selector</h3>
<p>Consider the JSON document</p>
<pre><code>[
    {
      &quot;author&quot; : &quot;Haruki Murakami&quot;,
      &quot;title&quot;: &quot;A Wild Sheep Chase&quot;,
      &quot;reviews&quot;: [{&quot;rating&quot;: 4, &quot;reviewer&quot;: &quot;Nan&quot;}]
    },
    {
      &quot;author&quot; : &quot;Sergei Lukyanenko&quot;,
      &quot;title&quot;: &quot;The Night Watch&quot;,
      &quot;reviews&quot;: [{&quot;rating&quot;: 5, &quot;reviewer&quot;: &quot;Alan&quot;},
                  {&quot;rating&quot;: 3,&quot;reviewer&quot;: &quot;Anne&quot;}]
    },
    {
      &quot;author&quot; : &quot;Graham Greene&quot;,
      &quot;title&quot;: &quot;The Comedians&quot;,
      &quot;reviews&quot;: [{&quot;rating&quot;: 4, &quot;reviewer&quot;: &quot;Lisa&quot;},
                  {&quot;rating&quot;: 5, &quot;reviewer&quot;: &quot;Robert&quot;}]
    }
]
</code></pre>
<p>JsonCons supports the parent selector, <code>^</code>, borrowed from <a href="https://www.npmjs.com/package/jsonpath-plus">JSONPath Plus</a>,
that allows you to select book objects based on criteria applied to descendent values.</p>
<table>
<thead>
<tr>
<th>Query</th>
<th>Output paths</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$[*]reviews[?(@.rating == 5)]</code></td>
<td>&quot;$[1]['reviews'][0]&quot;</td>
</tr>
<tr>
<td> </td>
<td>&quot;$[2]['reviews'][1]&quot;</td>
</tr>
<tr>
<td><code>$[*]reviews[?(@.rating == 5)]^</code></td>
<td>&quot;$[1]['reviews']&quot;</td>
</tr>
<tr>
<td> </td>
<td>&quot;$[2]['reviews']&quot;</td>
</tr>
<tr>
<td><code>$[*]reviews[?(@.rating == 5)]^^</code></td>
<td>&quot;$[1]&quot;</td>
</tr>
<tr>
<td> </td>
<td>&quot;$[2]&quot;</td>
</tr>
</tbody>
</table>
<p>The JSONPath expression</p>
<pre><code>$[*].reviews[?(@.rating == 5)]^^
</code></pre>
<p>selects all the book objects that have ratings of 5:</p>
<pre><code>[
    {
        &quot;author&quot;: &quot;Sergei Lukyanenko&quot;,
        &quot;reviews&quot;: [
            {
                &quot;rating&quot;: 5,
                &quot;reviewer&quot;: &quot;Alan&quot;
            },
            {
                &quot;rating&quot;: 3,
                &quot;reviewer&quot;: &quot;Anne&quot;
            }
        ],
        &quot;title&quot;: &quot;The Night Watch&quot;
    },
    {
        &quot;author&quot;: &quot;Graham Greene&quot;,
        &quot;reviews&quot;: [
            {
                &quot;rating&quot;: 4,
                &quot;reviewer&quot;: &quot;Lisa&quot;
            },
            {
                &quot;rating&quot;: 5,
                &quot;reviewer&quot;: &quot;Robert&quot;
            }
        ],
        &quot;title&quot;: &quot;The Comedians&quot;
    }
]
</code></pre>
<div id="Selector6"></div> 
<h3 id="slices">Slices</h3>
<p>JsonCons jsonpath slices have the same semantics as Python slices</p>
<p>The syntax for a slice is</p>
<pre><code>[start:stop:step]
</code></pre>
<p>Each component is optional.</p>
<ul>
<li><p>If <code>start</code> is omitted, it defaults to <code>0</code> if <code>step</code> is positive,
or the end of the array if <code>step</code> is negative.</p>
</li>
<li><p>If <code>stop</code> is omitted, it defaults to the length of the array if <code>step</code>
is positive, or the beginning of the array if <code>step</code> is negative.</p>
</li>
<li><p>If <code>step</code> is omitted, it defaults to <code>1</code>.</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Slice expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[start:stop]</code></td>
<td>Items <code>start</code> through <code>stop-1</code></td>
</tr>
<tr>
<td><code>[start:]</code></td>
<td>Items <code>start</code> to the end of the array</td>
</tr>
<tr>
<td><code>[:stop]</code></td>
<td>Items from the beginning of the array through <code>stop-1</code></td>
</tr>
<tr>
<td><code>[:]</code></td>
<td>All items</td>
</tr>
<tr>
<td><code>[start:stop:step]</code></td>
<td>Items <code>start</code> up to but not including <code>stop</code>, by <code>step</code></td>
</tr>
</tbody>
</table>
<p>A component <code>start</code>, <code>stop</code>, or <code>step</code> may be a negative number.</p>
<table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>$[-1]</td>
<td>Last item</td>
</tr>
<tr>
<td>$[-2:]</td>
<td>Last two items</td>
</tr>
<tr>
<td>$[:-2]</td>
<td>All items except the last two</td>
</tr>
<tr>
<td>$[::-1]</td>
<td>All items, reversed</td>
</tr>
<tr>
<td>$[1::-1]</td>
<td>First two items, reversed</td>
</tr>
<tr>
<td>$[:-3:-1]</td>
<td>Last two items, reversed</td>
</tr>
<tr>
<td>$[-3::-1]</td>
<td>All items except the last two, reversed</td>
</tr>
</tbody>
</table>
<div id="Selector7"></div> 
<h3 id="recursive-descent-selector-">Recursive descent selector (..)</h3>
<p>The recursive descent selector performs a select operation
on a provided JSON value as follows:</p>
<ul>
<li><p>If its tail is null, it adds the value to the result list,
and exits. Otherwise, it first provides the value to its tail,
and continues as below.</p>
</li>
<li><p>If the provided value is a JSON array, it iterates over each
item in the array, and recursively performs the select
operation on each item.</p>
</li>
<li><p>If the provided value is a JSON object, it iterates over each
property in the object, and recursively performs the select
operation on each property's value.</p>
</li>
</ul>
<p>Consider the JSON document</p>
<pre><code>{&quot;foo&quot;:[
  {&quot;a&quot;:&quot;bar&quot;},
  {&quot;b&quot;:&quot;baz&quot;},
  {&quot;b&quot;:&quot;qux&quot;}
]}
</code></pre>
<p>and JSONPath</p>
<pre><code>$..b 
</code></pre>
<p>After tokenization, the JSONPath becomes</p>
<p><img src="images/SelectorListWithRecursiveDescent" alt="SelectorListWithRecursiveDescent"></p>
<p>Evaluation proceeds as follows:</p>
<p><img src="images/EvaluateSelectorListWithRecursiveDescent.png" alt="EvaluateSelectorListWithRecursiveDescent"></p>
<p>The final result is</p>
<pre><code>[&quot;baz&quot;,&quot;qux&quot;]
</code></pre>
<div id="Selector9"></div> 
<h3 id="unions">Unions</h3>
<p>In JsonCons, a JSONPath union element can be</p>
<ul>
<li>an index or slice expression</li>
<li>a single quoted name</li>
<li>a double quoted name</li>
<li>a filter</li>
<li>a wildcard, i.e. <code>*</code></li>
<li>a path relative to the root of the JSON document (begins with <code>$</code>)</li>
<li>a path relative to the current value being processed (begins with <code>@</code>)</li>
</ul>
<p>To illustrate, the path expression below selects the first and second titles,
the last, and the third from <a href="https://goessner.net/articles/JsonPath/index.html#e3">Stefan Goessner's store</a>:</p>
<pre><code>&quot;$.store.book[0:2,-1,?(@.author=='Herman Melville')].title&quot;
</code></pre>
<div id="Selector10"></div> 
<h3 id="filter-selector">Filter selector</h3>
<p>JSONPath uses filter expressions <code>[?&lt;expr&gt;]</code> to restrict the set of nodes
returned by a path, e.g. <code>$..book[?(@.price&lt;10)]</code> returns the books with
prices less than 10. Filter expressions are applied to each element in a
JSON array or each member in a JSON object. The symbol <code>@</code> represents the
value currently being processed. An expression evaluates to true or false,
if true, the array element, or value part of an object member, is selected.</p>
<p>An expression is considered false if it evaluates to any of the following values:</p>
<ul>
<li>empty array: [],</li>
<li>empty object: {},</li>
<li>empty string: &quot;&quot;,</li>
<li>false,</li>
<li>null,</li>
<li>zero.</li>
</ul>
<p>It is considered true if it is not false.</p>
<h2 id="filter-expressions">Filter Expressions</h2>
<h3 id="true-and-false-values">True and False Values</h3>
<p>A false value is any value on this list:</p>
<ul>
<li>empty array: [],</li>
<li>empty object: {},</li>
<li>empty string: &quot;&quot;,</li>
<li>false,</li>
<li>null,</li>
<li>zero.</li>
</ul>
<p>A true value is any value that is not false</p>
<h3 id="operator-precedence">Operator Precedence</h3>
<table>
<thead>
<tr>
<th>Precedence</th>
<th>Operator</th>
<th>Associativity</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>!</code> unary <code>-</code></td>
<td>Right</td>
</tr>
<tr>
<td>2</td>
<td><code>=~</code></td>
<td>Left</td>
</tr>
<tr>
<td>3</td>
<td><code>*</code> <code>/</code>  <code>%</code></td>
<td>Left</td>
</tr>
<tr>
<td>4</td>
<td><code>+</code> <code>-</code></td>
<td>Left</td>
</tr>
<tr>
<td>5</td>
<td><code>&lt;</code> <code>&gt;</code> <code>&lt;=</code> <code>&gt;=</code></td>
<td>Left</td>
</tr>
<tr>
<td>6</td>
<td><code>==</code> <code>!=</code></td>
<td>Left</td>
</tr>
<tr>
<td>7</td>
<td><code>&amp;&amp;</code></td>
<td>Left</td>
</tr>
<tr>
<td>8</td>
<td><code>||</code></td>
<td>Left</td>
</tr>
</tbody>
</table>
<p>The precedence rules may be overriden with explicit parentheses, e.g. (a || b) &amp;&amp; c.</p>
<h3 id="or-expression">Or Expression</h3>
<pre><code class="lang-text">or-expression = expression &quot;||&quot; expression
</code></pre>
<p>If both left and right sides are null, the or-expression evaluates
to null. Otherwise, if the left side evaluates to true,
it will evaluate to its left side, and if
the left side evaluates to false, it will evaluate to its
right side.</p>
<h3 id="and-expression">And Expression</h3>
<pre><code class="lang-text">and-expression = expression &quot;&amp;&amp;&quot; expression
</code></pre>
<p>If the left side evaluates to true, then the and-expression evaluates
to the right side, otherwise it evaluates to the left side.</p>
<h3 id="not-expression">Not Expression</h3>
<pre><code class="lang-text">not-expression = &quot;!&quot; expression
</code></pre>
<p>If an expression evaluates to true, a not-expression will evaluate to
false. Conversely if an expression evaluates to false, a not-expression
will evaluate to true;</p>
<h3 id="unary-minus-expression">Unary Minus Expression</h3>
<pre><code class="lang-text">unary-minus-expression = -expression
</code></pre>
<p>The - (unary minus) operator negates the value of the expression.
It is only valid if the expression evaluates to a number.</p>
<h3 id="example">Example</h3>
<p>JSON Document:</p>
<pre><code class="lang-json">[{&quot;key&quot;: 0}, {&quot;key&quot;: 42}, {&quot;key&quot;: -1}, {&quot;key&quot;: 41}, {&quot;key&quot;: 43}, {&quot;key&quot;: 42.0001}, {&quot;key&quot;: 41.9999}, {&quot;key&quot;: 100}, {&quot;some&quot;: &quot;value&quot;}]
</code></pre>
<p>JSONPath:</p>
<pre><code class="lang-text">$[?-@.key &gt; -42]
</code></pre>
<p>Result:</p>
<pre><code class="lang-json">[{&quot;key&quot;: 0}, {&quot;key&quot;: -1}, {&quot;key&quot;: 41}, {&quot;key&quot;: 41.9999}]
</code></pre>
<h3 id="functions">Functions</h3>
<h3 id="abs">abs</h3>
<pre><code>number abs(number value)
</code></pre>
<p>Returns the absolute value of a number.</p>
<p>It is a type error if the provided argument is not a number.</p>
<h3 id="examples">Examples</h3>
<h3 id="avg">avg</h3>
<pre><code>number|null avg(array[number] value)
</code></pre>
<p>Returns the average of the items in an array of numbers, or null if the array is empty</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided value is not an array</p>
</li>
<li><p>the array contains items that are not numbers</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(@.price &gt; avg($.books[*].price))].title&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>&quot;The Night Watch&quot;
</code></pre>
<h3 id="ceil">ceil</h3>
<pre><code>integer ceil(number value)
</code></pre>
<p>Returns the smallest integer value not less than the provided number.</p>
<p>It is a type error if the provided argument is not a number.</p>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(ceil(@.price*10) == 236)]&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>{
    &quot;category&quot;: &quot;fiction&quot;,
    &quot;title&quot; : &quot;The Night Watch&quot;,
    &quot;author&quot; : &quot;Sergei Lukyanenko&quot;,
    &quot;price&quot; : 23.58
}
</code></pre>
<h3 id="contains">contains</h3>
<pre><code>boolean contains(array|string source, any search)
</code></pre>
<p>If source is an array, returns true if the array contains an item that is equal to
the search value, false otherwise.</p>
<p>If source is a string, returns true if the string contains a substring that is equal to
the search value, false otherwise.</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided source is not an array or string, or</p>
</li>
<li><p>the provided source is a string but the provided search value is not a string.</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(!contains(keys(@),'price'))]&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>{
    &quot;category&quot;: &quot;fiction&quot;,
    &quot;author&quot;: &quot;J. R. R. Tolkien&quot;,
    &quot;title&quot;: &quot;The Lord of the Rings&quot;
}
</code></pre>
<h3 id="ends_with">ends_with</h3>
<pre><code>boolean ends_with(string source, string suffix)
</code></pre>
<p>Returns true if the source string ends with the suffix string, otherwise false.</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided source is not a string, or</p>
</li>
<li><p>the provided suffix is not a string</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="floor">floor</h3>
<pre><code>integer floor(number value)
</code></pre>
<p>Returns the largest integer value not greater than the given number.</p>
<p>It is a type error if the provided argument is not a number.</p>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(floor(@.price*10) == 235)]&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>{
    &quot;category&quot;: &quot;fiction&quot;,
    &quot;title&quot; : &quot;A Wild Sheep Chase&quot;,
    &quot;author&quot; : &quot;Haruki Murakami&quot;,
    &quot;price&quot; : 22.72
}
</code></pre>
<h3 id="keys">keys</h3>
<pre><code>array[string] keys(object value)
</code></pre>
<p>Returns an array of keys in the object.</p>
<p>It is a type error if the provided argument is not an object.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(tokenize(@.author,'\\s+')[-1] == 'Tolkien')]&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>{
    &quot;category&quot;: &quot;fiction&quot;,
    &quot;author&quot;: &quot;J. R. R. Tolkien&quot;,
    &quot;title&quot;: &quot;The Lord of the Rings&quot;
}
</code></pre>
<h3 id="length">length</h3>
<pre><code>integer|null length(array|object|string value)
</code></pre>
<p>Returns the length of an array, object or string.</p>
<p>If array, returns the number of items in the array
If object, returns the number of key-value pairs in the object
If string, returns the number of codepoints in the string
Otherwise, returns null.</p>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results3 = JsonPath.Select(doc.RootElement, @&quot;$.books[?(@.price &gt; sum($.books[*].price)/length($.books[*].price))].title&quot;);
                foreach (var value in results3)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>&quot;The Night Watch&quot;
</code></pre>
<h3 id="max">max</h3>
<pre><code>number|string|null max(array[number]|array[string] value)
</code></pre>
<p>Returns the highest number found in an array of numbers,
or the highest string in an array of strings, or null
if the array is empty.</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided value is not an array</p>
</li>
<li><p>the array contains items that are not all numbers or all strings</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="min">min</h3>
<pre><code>number|string|null min(array[number]|array[string] value)
</code></pre>
<p>Returns the lowest number found in an array of numbers,
or the lowest string in an array of strings, or null if
the array is empty</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided value is not an array</p>
</li>
<li><p>the array contains items that are not all numbers or all strings</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="prod">prod</h3>
<pre><code class="lang-c++">number|null avg(array[number] value)
</code></pre>
<p>Returns the product of the items in an array of numbers, or null if the array is empty.</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided value is not an array</p>
</li>
<li><p>the array contains items that are not numbers</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="starts_with">starts_with</h3>
<pre><code>boolean starts_with(string source, string prefix)
</code></pre>
<p>Returns true if the source string starts with the prefix string, otherwise false.</p>
<p>It is a type error if</p>
<ul>
<li>the provided source is not a string, or</li>
<li>the provided prefix is not a string</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="sum">sum</h3>
<pre><code>number sum(array[number] value)
</code></pre>
<p>Returns the sum of the items in an array of numbers.</p>
<p>Returns 0 if the array is empty.</p>
<p>It is a type error if any item in the array is not a number.</p>
<h3 id="examples">Examples</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results3 = JsonPath.Select(doc.RootElement, @&quot;$.books[?(@.price &gt; sum($.books[*].price)/length($.books[*].price))].title&quot;);
                foreach (var value in results3)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>&quot;The Night Watch&quot;
</code></pre>
<h3 id="to_number">to_number</h3>
<pre><code>number to_number(string|number value)
</code></pre>
<p>If string, returns the parsed number.
If number, returns the passed in value.</p>
<p>It is a type error if</p>
<ul>
<li><p>the provided value is not a string or number</p>
</li>
<li><p>the string cannot be parsed as a number</p>
</li>
</ul>
<h3 id="examples">Examples</h3>
<h3 id="tokenize">tokenize</h3>
<pre><code>array[string] tokenize(string source, string pattern)
</code></pre>
<p>Returns an array of strings formed by splitting the source string into an array of strings, separated by substrings that match the given regular expression pattern.</p>
<p>It is a type error if either argument is not a string.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-csharp">using System;
using System.IO;
using System.Collections.Generic;
using System.Text.Json;
using JsonCons.JsonPath;

namespace JsonCons.Examples
{
    public static class JsonPathExamples
    {
        public static void Main(string[] args)
        {
            string jsonString = @&quot;
{
    &quot;&quot;books&quot;&quot;:
    [
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;A Wild Sheep Chase&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Haruki Murakami&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 22.72
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Night Watch&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Sergei Lukyanenko&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 23.58
        },
        {
            &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
            &quot;&quot;title&quot;&quot; : &quot;&quot;The Comedians&quot;&quot;,
            &quot;&quot;author&quot;&quot; : &quot;&quot;Graham Greene&quot;&quot;,
            &quot;&quot;price&quot;&quot; : 21.99
        },
        { 
          &quot;&quot;category&quot;&quot;: &quot;&quot;fiction&quot;&quot;,
          &quot;&quot;author&quot;&quot;: &quot;&quot;J. R. R. Tolkien&quot;&quot;,
          &quot;&quot;title&quot;&quot;: &quot;&quot;The Lord of the Rings&quot;&quot;
        }
    ]
}
            &quot;;

            using (JsonDocument doc = JsonDocument.Parse(jsonString))
            {
                IList&lt;JsonElement&gt; results = JsonPath.Select(doc.RootElement, @&quot;$.books[?(tokenize(@.author,'\\s+')[-1] == 'Tolkien')]&quot;);
                foreach (var value in results)
                {
                    Console.WriteLine(value);
                }
            }
        }
    }
}
</code></pre>
<p>Output:</p>
<pre><code>{
    &quot;category&quot;: &quot;fiction&quot;,
    &quot;author&quot;: &quot;J. R. R. Tolkien&quot;,
    &quot;title&quot;: &quot;The Lord of the Rings&quot;
}
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/danielaparker/JsonCons.Net/blob/main/doc_source/articles/JsonPath/Specification.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
